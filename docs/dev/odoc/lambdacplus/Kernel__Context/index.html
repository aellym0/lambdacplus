<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Kernel__Context (lambdacplus.Kernel__Context)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">lambdacplus</a> &#x00BB; Kernel__Context</nav><h1>Module <code>Kernel__Context</code></h1><p>This module implements the Context as described in the semantics. These function similarly to those described the Types and Programming Languages book by Pierce.</p><dl><dt>see <a href="https://www.cis.upenn.edu/~bcpierce/tapl/">https://www.cis.upenn.edu/~bcpierce/tapl/</a></dt><dd><p>Types and Programming Languages</p><p>The key modification that we make is that we take contexts to be lists of triples of the form</p><p><code>(var_name, var_type, binding)</code></p><p>where</p><ul><li><code>var_name</code> is a string denoting the name of the variable.</li><li><code>var_type</code> is the type of the <code>binding</code>.</li><li><code>binding</code> is the expression bound to <code>var_name</code>.</li></ul><p>In other words, we use the same context to store types and bindings. Note that the index of <code>var_name</code> in the context is the de bruijn index of the variable.</p><p>This is used to implement 2 kinds of contexts, namely</p><ul><li>the naming context</li><li>the evaluation context</li></ul><p>The former is used to convert the parser's AST into the internal de bruijn AST, while the evaluation context is used to typecheck and evaluate expressions that are in the de bruijn AST.</p></dd></dl></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Underlying type of contexts. This context module is existentially quantified over this type variable.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dd><p>Empty context</p></dd></dl><dl><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val</span> is_empty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_empty ctx</code> checks if ctx is empty</p></dd></dl><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>length ctx</code> returns the length of ctx</p></dd></dl><dl><dt class="spec value" id="val-add_binding"><a href="#val-add_binding" class="anchor"></a><code><span class="keyword">val</span> add_binding : string <span>&#45;&gt;</span> <span>?&#8288;var_type:<span>int <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;binding:<span>int <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add_binding var_name ?var_type ?binding ctx</code> returns ctx extended with the binding (var_name, var_type, binding)</p><p>Note that if <code>var_name</code> already exists in the context, the new binding added to it shadows the old one.</p><p>Here we allow <code>var_type</code> and <code>binding</code> to be optional. This is useful because when we convert the parser's AST to the de bruijn one, we only add var names to the context to convert them to de bruijn indices. In such cases, we do not want to add a binding or type to it.</p></dd></dl><dl><dt class="spec value" id="val-add_name_bindings"><a href="#val-add_name_bindings" class="anchor"></a><code><span class="keyword">val</span> add_name_bindings : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add_name_bindings ctx [var_name_0 ... var_name_n]</code> returns ctx extended with <code>(var_name0, None, None)</code> ... <code>(var_name_n, None, None)</code></p><p>This is used when converting the parser's AST to the de bruijn one.</p></dd></dl><dl><dt class="spec value" id="val-var_name_to_index"><a href="#val-var_name_to_index" class="anchor"></a><code><span class="keyword">val</span> var_name_to_index : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>int option</span></code></dt><dd><p><code>var_name_to_index ctx str</code> finds the first index corresponding to the variable name <code>str</code>.</p><p>If such an index exists, a <code>Some</code> is returned. Otherwise the output is <code>None</code>.</p></dd></dl><dl><dt class="spec value" id="val-index_to_var_name"><a href="#val-index_to_var_name" class="anchor"></a><code><span class="keyword">val</span> index_to_var_name : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> string</code></dt><dd><p><code>index_to_var_name ctx index</code> returns the variable name corresponding to <code>index</code> in <code>ctx</code>.</p><p>Note that this function throws an exception if <code>index</code> is out of bounds.</p></dd></dl><dl><dt class="spec value" id="val-get_binding"><a href="#val-get_binding" class="anchor"></a><code><span class="keyword">val</span> get_binding : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>int <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span> option</span></code></dt><dd><p><code>get_binding ctx index</code> returns the <code>binding</code> corresponding to a variable identified by the de bruijn index, <code>index</code>.</p><p>Note that this function throws an exception if <code>index</code> is out of bounds.</p></dd></dl><dl><dt class="spec value" id="val-get_type"><a href="#val-get_type" class="anchor"></a><code><span class="keyword">val</span> get_type : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span>int <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span></code></dt><dd><p><code>get_binding ctx index</code> returns the <code>type</code> corresponding to a variable identified by the de bruijn index, <code>index</code>.</p><p>Note that this function throws an exception if <code>index</code> is out of bounds. Also, if the variable has no type binding, ie <code>var_type</code> is None, then an exception is thrown.</p></dd></dl><dl><dt class="spec value" id="val-is_var_name_bound"><a href="#val-is_var_name_bound" class="anchor"></a><code><span class="keyword">val</span> is_var_name_bound : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_var_name_bound ctx var_name</code> checks if <code>var_name</code> already exists in <code>ctx</code>. This is used when generating fresh variable names when unparsing expressions from the de bruijn AST back to the parser's AST.</p></dd></dl><dl><dt class="spec value" id="val-pretty_print"><a href="#val-pretty_print" class="anchor"></a><code><span class="keyword">val</span> pretty_print : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>prett_print ctx</code> pretty prints <code>ctx</code> to <code>stdout</code>.</p><p>This is mostly for internal debugging purposes.</p></dd></dl></div></body></html>