<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lambdacplus__Ast_conv (lambdacplus.Lambdacplus__Ast_conv)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">lambdacplus</a> &#x00BB; Lambdacplus__Ast_conv</nav><h1>Module <code>Lambdacplus__Ast_conv</code></h1><p>This module is responsible for converting between</p><ul><li>the internal de bruijn AST, <code>int Common.Ast.expr</code>, which uses de bruin indices to identify variables.</li></ul><ul><li>the parser's AST, <code>string Common.Ast.expr</code>, which uses strings representing variable names to identify variables.</li></ul><p>The techniques used in the actual implementation follow closely the Types and Programming Languages book by Pierce.</p><dl><dt>see <a href="https://www.cis.upenn.edu/~bcpierce/tapl/">https://www.cis.upenn.edu/~bcpierce/tapl/</a></dt><dd><p>Types and Programming Languages</p></dd></dl></header><dl><dt class="spec exception" id="exception-Unknown_var_name"><a href="#exception-Unknown_var_name" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Unknown_var_name</span> <span class="keyword">of</span> <span>string <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span></code></dt><dd><p>This is raised whenever we encounter an unknown variable name.</p><p>The expression in this exception is always a variable node of the form</p><p><code>{data=Ast.Var str; source_loc}</code></p><p>where</p><ul><li><code>str</code> is the variable name</li><li>source_loc is the source location corresponding to this node</li></ul></dd></dl><dl><dt class="spec exception" id="exception-Underscore_var_name"><a href="#exception-Underscore_var_name" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Underscore_var_name</span> <span class="keyword">of</span> <a href="../Common/Location/index.html#type-source_loc">Common.Location.source_loc</a></code></dt><dd><p>This is raised whenever we encounter an underscore, ie <code>_</code>, used in a position that is not a variable.</p><p>The <code>source_loc</code> in this exception indicates the source location where the underscore was found.</p></dd></dl><dl><dt class="spec value" id="val-parser_to_internal_expr"><a href="#val-parser_to_internal_expr" class="anchor"></a><code><span class="keyword">val</span> parser_to_internal_expr : <a href="../Kernel/Context/index.html#type-t">Kernel.Context.t</a> <span>&#45;&gt;</span> <span>string <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span> <span>&#45;&gt;</span> <span>int <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span></code></dt><dd><p><code>parser_to_internal_expr ctx expr</code> converts <code>expr</code>, from the parser's AST to the de bruijn one using the naming context ctx.</p></dd></dl><dl><dt class="spec value" id="val-parser_to_internal_stmt"><a href="#val-parser_to_internal_stmt" class="anchor"></a><code><span class="keyword">val</span> parser_to_internal_stmt : <span>string <a href="../Common/Ast/index.html#type-stmt">Common.Ast.stmt</a></span> <span>&#45;&gt;</span> <a href="../Kernel/Context/index.html#type-t">Kernel.Context.t</a> <span>&#45;&gt;</span> <span>int <a href="../Common/Ast/index.html#type-stmt">Common.Ast.stmt</a></span> * <a href="../Kernel/Context/index.html#type-t">Kernel.Context.t</a></code></dt><dd><p><code>parser_to_internal_stmt statement ctx</code> converts <code>statement</code> from the parser's AST to the de bruijn one.</p><p>The return value is a pair of the form <code>(expr, ctx)</code> where</p><ul><li><code>expr</code> is the converted expression</li><li><code>ctx</code> is the new context, possibly extending with a new binding</li></ul></dd></dl><dl><dt class="spec value" id="val-parser_to_internal_stmts"><a href="#val-parser_to_internal_stmts" class="anchor"></a><code><span class="keyword">val</span> parser_to_internal_stmts : <span>string <a href="../Common/Ast/index.html#type-list_of_stmts">Common.Ast.list_of_stmts</a></span> <span>&#45;&gt;</span> <a href="../Kernel/Context/index.html#type-t">Kernel.Context.t</a> <span>&#45;&gt;</span> <span>int <a href="../Common/Ast/index.html#type-list_of_stmts">Common.Ast.list_of_stmts</a></span> * <a href="../Kernel/Context/index.html#type-t">Kernel.Context.t</a></code></dt><dd><p><code>parser_to_internal_stmts statements ctx</code> folds over <code>statements</code> using <a href="index.html#val-parser_to_internal_stmt"><code>parser_to_internal_stmt</code></a></p></dd></dl><dl><dt class="spec value" id="val-internal_to_parser_expr"><a href="#val-internal_to_parser_expr" class="anchor"></a><code><span class="keyword">val</span> internal_to_parser_expr : <a href="../Kernel/Context/index.html#type-t">Kernel.Context.t</a> <span>&#45;&gt;</span> <span>int <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span> <span>&#45;&gt;</span> <span>string <a href="../Common/Ast/index.html#type-expr">Common.Ast.expr</a></span></code></dt><dd><p><code>internal_to_parser_expr ctx expr</code> converts <code>expr</code> from the de bruijn AST back to the parser's AST.</p><p>This is called after an expression has been typechecked and fully normalized.</p></dd></dl></div></body></html>