<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Common__Ast (lambdacplus.Common__Ast)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">lambdacplus</a> &#x00BB; Common__Ast</nav><h1>Module <code>Common__Ast</code></h1></header><aside><p>This module contains the AST of λC+.</p><p>The AST is parameterized over <code>'a</code>, which denotes the type of data stored in variable nodes. This is either <code>string</code> or <code>int</code>.</p><p>The former corresponds to the parser's AST, which is spit out by the parser after parsing the concrete syntax. Here, variable names are strings that the user input.</p><p>When <code>'a</code> is <code>int</code>, the AST corresponds to the internal de bruijn AST, which represents variables using de bruijn indices. This is the AST used for typechecking and normalization.</p><p>Many of the functions here are automatically generated by the <code>visitors</code> library, which offers facilities for deriving stuff like folds ala Haskell. These result in virtual classes following the object-oriented visitor pattern. Other functions like <code>show</code> and all the pretty printing ones are derived using other libraries.</p><p>Only those which were not automatically generated have been documented appropriately.</p></aside><dl><dt class="spec type" id="type-expr"><a href="#type-expr" class="anchor"></a><code><span class="keyword">type</span> <span>'a expr</span></code><code> = <span><span><span class="type-var">'a</span> <a href="index.html#type-raw_expr">raw_expr</a></span> <a href="../Common/Location/index.html#type-located">Common.Location.located</a></span></code></dt><dd><p>Expressions are raw expressions together with their source locations.</p></dd></dl><dl><dt class="spec type" id="type-abstraction"><a href="#type-abstraction" class="anchor"></a><code><span class="keyword">and</span> <span>'a abstraction</span></code><code> = </code><code>{</code><table class="record"><tr id="type-abstraction.var_name" class="anchored"><td class="def field"><a href="#type-abstraction.var_name" class="anchor"></a><code>var_name : string;</code></td></tr><tr id="type-abstraction.expr" class="anchored"><td class="def field"><a href="#type-abstraction.expr" class="anchor"></a><code>expr : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr><tr id="type-abstraction.body" class="anchored"><td class="def field"><a href="#type-abstraction.body" class="anchor"></a><code>body : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr></table><code>}</code></dt><dd><p>This is used to represent the Pi, Sigma and Existential types since they all have similar structure:</p><ul><li>Pi (<a href="index.html#type-abstraction.var_name"><code>var_name</code></a> : <a href="index.html#type-expr"><code>expr</code></a>), <a href="index.html#type-abstraction.body"><code>body</code></a></li><li>Sigma (<a href="index.html#type-abstraction.var_name"><code>var_name</code></a> : <a href="index.html#type-expr"><code>expr</code></a>), <a href="index.html#type-abstraction.body"><code>body</code></a></li><li>exists (<a href="index.html#type-abstraction.var_name"><code>var_name</code></a> : <a href="index.html#type-expr"><code>expr</code></a>), <a href="index.html#type-abstraction.body"><code>body</code></a></li></ul><p>Note that <a href="index.html#type-abstraction.var_name"><code>var_name</code></a> is bound in <a href="index.html#type-abstraction.body"><code>body</code></a> but not <a href="index.html#type-expr"><code>expr</code></a>.</p></dd></dl><dl><dt class="spec type" id="type-match_binding"><a href="#type-match_binding" class="anchor"></a><code><span class="keyword">and</span> <span>'a match_binding</span></code><code> = </code><code>{</code><table class="record"><tr id="type-match_binding.match_var" class="anchored"><td class="def field"><a href="#type-match_binding.match_var" class="anchor"></a><code>match_var : string;</code></td></tr><tr id="type-match_binding.match_body" class="anchored"><td class="def field"><a href="#type-match_binding.match_body" class="anchor"></a><code>match_body : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr></table><code>}</code></dt><dd><p>Used to represent the 2 clauses of match expressions, ie:</p><ul><li>inl <a href="index.html#type-match_binding.match_var"><code>match_var</code></a> =&gt; <a href="index.html#type-match_binding.match_body"><code>match_body</code></a></li><li>inr <a href="index.html#type-match_binding.match_var"><code>match_var</code></a> =&gt; <a href="index.html#type-match_binding.match_body"><code>match_body</code></a></li></ul></dd></dl><dl><dt class="spec type" id="type-pair"><a href="#type-pair" class="anchor"></a><code><span class="keyword">and</span> <span>'a pair</span></code><code> = </code><code>{</code><table class="record"><tr id="type-pair.left" class="anchored"><td class="def field"><a href="#type-pair.left" class="anchor"></a><code>left : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr><tr id="type-pair.right" class="anchored"><td class="def field"><a href="#type-pair.right" class="anchor"></a><code>right : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr></table><code>}</code></dt><dd><p>Used to represent</p><ul><li>Function application, <a href="index.html#type-raw_expr.App"><code>App</code></a>: (<a href="index.html#type-pair.left"><code>left</code></a> <a href="index.html#type-pair.right"><code>right</code></a>)</li><li>Pair constructor for <a href="index.html#type-raw_expr.Sigma"><code>Sigma</code></a> types, <a href="index.html#type-raw_expr.Pair"><code>Pair</code></a>: (<a href="index.html#type-pair.left"><code>left</code></a>, <a href="index.html#type-pair.right"><code>right</code></a>)</li><li>Type constructor for <a href="index.html#type-raw_expr.Sum"><code>Sum</code></a> type: <a href="index.html#type-pair.left"><code>left</code></a> + <a href="index.html#type-pair.right"><code>right</code></a></li><li>Pair constuctor for Existential types, <a href="index.html#type-raw_expr.Exists_pair"><code>Exists_pair</code></a>: {<a href="index.html#type-pair.left"><code>left</code></a>, <a href="index.html#type-pair.right"><code>right</code></a>}</li></ul></dd></dl><dl><dt class="spec type" id="type-raw_expr"><a href="#type-raw_expr" class="anchor"></a><code><span class="keyword">and</span> <span>'a raw_expr</span></code><code> = </code><table class="variant"><tr id="type-raw_expr.Type" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Type" class="anchor"></a><code>| </code><code><span class="constructor">Type</span></code></td></tr><tr id="type-raw_expr.Kind" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Kind" class="anchor"></a><code>| </code><code><span class="constructor">Kind</span></code></td></tr><tr id="type-raw_expr.Var" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Var" class="anchor"></a><code>| </code><code><span class="constructor">Var</span> <span class="keyword">of</span> <span class="type-var">'a</span></code></td><td class="doc"><p>Variables <code>'a</code> is <code>string</code> for the parser's AST and <code>int</code> for the internal AST using de bruijn indices.</p></td></tr><tr id="type-raw_expr.Pi" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Pi" class="anchor"></a><code>| </code><code><span class="constructor">Pi</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span></code></td><td class="doc"><p>Pi (<a href="index.html#type-abstraction.var_name"><code>var_name</code></a> : <a href="index.html#type-expr"><code>expr</code></a>), <a href="index.html#type-abstraction.body"><code>body</code></a></p></td></tr><tr id="type-raw_expr.Fun" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Fun" class="anchor"></a><code>| </code><code><span class="constructor">Fun</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-raw_expr.input_var" class="anchored"><td class="def field"><a href="#type-raw_expr.input_var" class="anchor"></a><code>input_var : string;</code></td></tr><tr id="type-raw_expr.input_type" class="anchored"><td class="def field"><a href="#type-raw_expr.input_type" class="anchor"></a><code>input_type : <span><span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span> option</span>;</code></td></tr><tr id="type-raw_expr.body" class="anchored"><td class="def field"><a href="#type-raw_expr.body" class="anchor"></a><code>body : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr></table><code>}</code></td><td class="doc"><p>Represents:</p><ul><li>fun <code>input_var</code> =&gt; <code>body</code></li><li>fun (<code>input_var</code> : <code>input_type</code>) =&gt; <code>body</code></li></ul></td></tr><tr id="type-raw_expr.App" class="anchored"><td class="def constructor"><a href="#type-raw_expr.App" class="anchor"></a><code>| </code><code><span class="constructor">App</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span></code></td><td class="doc"><p>Function application: (<a href="index.html#type-pair.left"><code>left</code></a> <a href="index.html#type-pair.right"><code>right</code></a>)</p></td></tr><tr id="type-raw_expr.Sigma" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Sigma" class="anchor"></a><code>| </code><code><span class="constructor">Sigma</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span></code></td><td class="doc"><p>Sigma type: Sigma (<a href="index.html#type-abstraction.var_name"><code>var_name</code></a> : <a href="index.html#type-expr"><code>expr</code></a>), <a href="index.html#type-abstraction.body"><code>body</code></a></p></td></tr><tr id="type-raw_expr.Pair" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Pair" class="anchor"></a><code>| </code><code><span class="constructor">Pair</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span></code></td><td class="doc"><p>Pair constructor: (<a href="index.html#type-pair.left"><code>left</code></a>, <a href="index.html#type-pair.right"><code>right</code></a>)</p></td></tr><tr id="type-raw_expr.Fst" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Fst" class="anchor"></a><code>| </code><code><span class="constructor">Fst</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></td><td class="doc"><p>Pair eliminator: fst <a href="index.html#type-expr"><code>expr</code></a></p></td></tr><tr id="type-raw_expr.Snd" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Snd" class="anchor"></a><code>| </code><code><span class="constructor">Snd</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></td><td class="doc"><p>Pair eliminator: snd <a href="index.html#type-expr"><code>expr</code></a></p></td></tr><tr id="type-raw_expr.Exists_pair" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Exists_pair" class="anchor"></a><code>| </code><code><span class="constructor">Exists_pair</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span></code></td><td class="doc"><p>Pair constuctor for Existential types: {<a href="index.html#type-pair.left"><code>left</code></a>, <a href="index.html#type-pair.right"><code>right</code></a>}</p></td></tr><tr id="type-raw_expr.Exists" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Exists" class="anchor"></a><code>| </code><code><span class="constructor">Exists</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span></code></td><td class="doc"><p>Existential type: exists (<a href="index.html#type-abstraction.var_name"><code>var_name</code></a> : <a href="index.html#type-expr"><code>expr</code></a>), <a href="index.html#type-abstraction.body"><code>body</code></a></p></td></tr><tr id="type-raw_expr.Exists_elim" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Exists_elim" class="anchor"></a><code>| </code><code><span class="constructor">Exists_elim</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-raw_expr.expr" class="anchored"><td class="def field"><a href="#type-raw_expr.expr" class="anchor"></a><code>expr : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr><tr id="type-raw_expr.witness_var" class="anchored"><td class="def field"><a href="#type-raw_expr.witness_var" class="anchor"></a><code>witness_var : string;</code></td></tr><tr id="type-raw_expr.witness_cert" class="anchored"><td class="def field"><a href="#type-raw_expr.witness_cert" class="anchor"></a><code>witness_cert : string;</code></td></tr><tr id="type-raw_expr.body" class="anchored"><td class="def field"><a href="#type-raw_expr.body" class="anchor"></a><code>body : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr></table><code>}</code></td><td class="doc"><p>Existential elimination:</p><p>let {<code>witness_var</code>, <code>witness_cert</code>} := <a href="index.html#type-expr"><code>expr</code></a> in <a href="index.html#type-abstraction.body"><code>body</code></a></p></td></tr><tr id="type-raw_expr.Sum" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Sum" class="anchor"></a><code>| </code><code><span class="constructor">Sum</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span></code></td><td class="doc"><p>Sum type: <a href="index.html#type-pair.left"><code>left</code></a> + <a href="index.html#type-pair.right"><code>right</code></a></p></td></tr><tr id="type-raw_expr.Inl" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Inl" class="anchor"></a><code>| </code><code><span class="constructor">Inl</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></td><td class="doc"><p>Left constructor for sum type: inl <a href="index.html#type-expr"><code>expr</code></a></p></td></tr><tr id="type-raw_expr.Inr" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Inr" class="anchor"></a><code>| </code><code><span class="constructor">Inr</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></td><td class="doc"><p>Right constructor for sum type: inr <a href="index.html#type-expr"><code>expr</code></a></p></td></tr><tr id="type-raw_expr.Match" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Match" class="anchor"></a><code>| </code><code><span class="constructor">Match</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-raw_expr.expr" class="anchored"><td class="def field"><a href="#type-raw_expr.expr" class="anchor"></a><code>expr : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr><tr id="type-raw_expr.inl" class="anchored"><td class="def field"><a href="#type-raw_expr.inl" class="anchor"></a><code>inl : <span><span class="type-var">'a</span> <a href="index.html#type-match_binding">match_binding</a></span>;</code></td></tr><tr id="type-raw_expr.inr" class="anchored"><td class="def field"><a href="#type-raw_expr.inr" class="anchor"></a><code>inr : <span><span class="type-var">'a</span> <a href="index.html#type-match_binding">match_binding</a></span>;</code></td></tr></table><code>}</code></td><td class="doc"><p>Sum eliminator:</p><p>match expr with</p><p>| inl <a href="index.html#type-match_binding.match_var"><code>match_var</code></a> =&gt; <a href="index.html#type-match_binding.match_body"><code>match_body</code></a></p><p>| inr <a href="index.html#type-match_binding.match_var"><code>match_var</code></a> =&gt; <a href="index.html#type-match_binding.match_body"><code>match_body</code></a></p><p>end</p></td></tr><tr id="type-raw_expr.Ascription" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Ascription" class="anchor"></a><code>| </code><code><span class="constructor">Ascription</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-raw_expr.expr" class="anchored"><td class="def field"><a href="#type-raw_expr.expr" class="anchor"></a><code>expr : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr><tr id="type-raw_expr.ascribed_type" class="anchored"><td class="def field"><a href="#type-raw_expr.ascribed_type" class="anchor"></a><code>ascribed_type : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr></table><code>}</code></td><td class="doc"><p>Type ascriptions: (<a href="index.html#type-expr"><code>expr</code></a> : <code>ascribed_type</code>)</p></td></tr><tr id="type-raw_expr.Let" class="anchored"><td class="def constructor"><a href="#type-raw_expr.Let" class="anchor"></a><code>| </code><code><span class="constructor">Let</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-raw_expr.abstraction" class="anchored"><td class="def field"><a href="#type-raw_expr.abstraction" class="anchor"></a><code>abstraction : <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span>;</code></td></tr><tr id="type-raw_expr.ascribed_type" class="anchored"><td class="def field"><a href="#type-raw_expr.ascribed_type" class="anchor"></a><code>ascribed_type : <span><span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span> option</span>;</code></td></tr></table><code>}</code></td><td class="doc"><p>Local let binding:</p><ul><li>let <a href="index.html#type-abstraction.var_name"><code>var_name</code></a> := <a href="index.html#type-expr"><code>expr</code></a> in <a href="index.html#type-abstraction.body"><code>body</code></a></li><li>let <a href="index.html#type-abstraction.var_name"><code>var_name</code></a> : <code>ascribed_type</code> := <a href="index.html#type-expr"><code>expr</code></a> in <a href="index.html#type-abstraction.body"><code>body</code></a></li></ul></td></tr></table></dt></dl><dl><dt class="spec value" id="val-pp_expr"><a href="#val-pp_expr" class="anchor"></a><code><span class="keyword">val</span> pp_expr : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_expr"><a href="#val-show_expr" class="anchor"></a><code><span class="keyword">val</span> show_expr : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt><dt class="spec value" id="val-pp_abstraction"><a href="#val-pp_abstraction" class="anchor"></a><code><span class="keyword">val</span> pp_abstraction : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_abstraction"><a href="#val-show_abstraction" class="anchor"></a><code><span class="keyword">val</span> show_abstraction : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt><dt class="spec value" id="val-pp_match_binding"><a href="#val-pp_match_binding" class="anchor"></a><code><span class="keyword">val</span> pp_match_binding : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-match_binding">match_binding</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_match_binding"><a href="#val-show_match_binding" class="anchor"></a><code><span class="keyword">val</span> show_match_binding : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-match_binding">match_binding</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt><dt class="spec value" id="val-pp_pair"><a href="#val-pp_pair" class="anchor"></a><code><span class="keyword">val</span> pp_pair : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_pair"><a href="#val-show_pair" class="anchor"></a><code><span class="keyword">val</span> show_pair : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt><dt class="spec value" id="val-pp_raw_expr"><a href="#val-pp_raw_expr" class="anchor"></a><code><span class="keyword">val</span> pp_raw_expr : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-raw_expr">raw_expr</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_raw_expr"><a href="#val-show_raw_expr" class="anchor"></a><code><span class="keyword">val</span> show_raw_expr : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-raw_expr">raw_expr</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt><dt class="spec value" id="val-equal_expr"><a href="#val-equal_expr" class="anchor"></a><code><span class="keyword">val</span> equal_expr : a. <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool</code></dt><dt class="spec value" id="val-equal_abstraction"><a href="#val-equal_abstraction" class="anchor"></a><code><span class="keyword">val</span> equal_abstraction : a. <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool</code></dt><dt class="spec value" id="val-equal_match_binding"><a href="#val-equal_match_binding" class="anchor"></a><code><span class="keyword">val</span> equal_match_binding : a. <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-match_binding">match_binding</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-match_binding">match_binding</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool</code></dt><dt class="spec value" id="val-equal_pair"><a href="#val-equal_pair" class="anchor"></a><code><span class="keyword">val</span> equal_pair : a. <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool</code></dt><dt class="spec value" id="val-equal_raw_expr"><a href="#val-equal_raw_expr" class="anchor"></a><code><span class="keyword">val</span> equal_raw_expr : a. <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-raw_expr">raw_expr</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-raw_expr">raw_expr</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.bool</code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec class" id="class-map"><a href="#class-map" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span> +'c <a href="class-map/index.html">map</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></div></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec class" id="class-fold"><a href="#class-fold" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span> +'a <a href="class-fold/index.html">fold</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></div></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><div class="spec class" id="class-iter"><a href="#class-iter" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span> +'b <a href="class-iter/index.html">iter</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></div></details></div></div></div><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-body"><a href="#val-body" class="anchor"></a><code><span class="keyword">val</span> body : <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></dt><dt class="spec value" id="val-expr"><a href="#val-expr" class="anchor"></a><code><span class="keyword">val</span> expr : <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></dt><dt class="spec value" id="val-var_name"><a href="#val-var_name" class="anchor"></a><code><span class="keyword">val</span> var_name : <span><span class="type-var">'a</span> <a href="index.html#type-abstraction">abstraction</a></span> <span>&#45;&gt;</span> string</code></dt></dl><div class="spec module" id="module-Fields_of_abstraction"><a href="#module-Fields_of_abstraction" class="anchor"></a><code><span class="keyword">module</span> <a href="Fields_of_abstraction/index.html">Fields_of_abstraction</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-match_body"><a href="#val-match_body" class="anchor"></a><code><span class="keyword">val</span> match_body : <span><span class="type-var">'a</span> <a href="index.html#type-match_binding">match_binding</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></dt><dt class="spec value" id="val-match_var"><a href="#val-match_var" class="anchor"></a><code><span class="keyword">val</span> match_var : <span><span class="type-var">'a</span> <a href="index.html#type-match_binding">match_binding</a></span> <span>&#45;&gt;</span> string</code></dt></dl><div class="spec module" id="module-Fields_of_match_binding"><a href="#module-Fields_of_match_binding" class="anchor"></a><code><span class="keyword">module</span> <a href="Fields_of_match_binding/index.html">Fields_of_match_binding</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-right"><a href="#val-right" class="anchor"></a><code><span class="keyword">val</span> right : <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></dt><dt class="spec value" id="val-left"><a href="#val-left" class="anchor"></a><code><span class="keyword">val</span> left : <span><span class="type-var">'a</span> <a href="index.html#type-pair">pair</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></dt></dl><div class="spec module" id="module-Fields_of_pair"><a href="#module-Fields_of_pair" class="anchor"></a><code><span class="keyword">module</span> <a href="Fields_of_pair/index.html">Fields_of_pair</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></div></div><dl><dt class="spec value" id="val-located_kind"><a href="#val-located_kind" class="anchor"></a><code><span class="keyword">val</span> located_kind : <span><span><span class="type-var">'a</span> <a href="index.html#type-raw_expr">raw_expr</a></span> <a href="../Common/Location/index.html#type-located">Common.Location.located</a></span></code></dt></dl><dl><dt class="spec class" id="class-ast_mapper"><a href="#class-ast_mapper" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span> +'c <a href="class-ast_mapper/index.html">ast_mapper</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Template for defining functions that map over the AST while preserving source locations. This is used by the functions which traverse the de bruijn AST and perform the <a href="index.html#val-shift"><code>shift</code></a>, <code>substitute</code> and <code>normalize</code> operations on de bruijn ASTs.</p></dd></dl><dl><dt class="spec class" id="class-ast_folder"><a href="#class-ast_folder" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">virtual</span> +'a <a href="class-ast_folder/index.html">ast_folder</a> : <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Template for defining folds over the AST that ignore source locations.</p></dd></dl><dl><dt class="spec value" id="val-shift"><a href="#val-shift" class="anchor"></a><code><span class="keyword">val</span> shift : int <span>&#45;&gt;</span> <span>int <a href="index.html#type-expr">expr</a></span> <span>&#45;&gt;</span> <span>int <a href="index.html#type-expr">expr</a></span></code></dt><dd><p><code>shift shift_by expr</code> is the shift operation for de bruijn ASTs.</p><p>Note that whenever we go under a binder, the cutoff index must be incremented by 1. If we go under 2 binders, as in the case of existential elimination expressions,</p><p>let {x, y} := E in E'</p><p>then we must increase the cutoff by 2.</p></dd></dl><dl><dt class="spec value" id="val-do_if_index_present"><a href="#val-do_if_index_present" class="anchor"></a><code><span class="keyword">val</span> do_if_index_present : int <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span>int <a href="index.html#type-expr">expr</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>do_if_index_present index f</code> traverses a de bruijn AST in search for a variable of index <code>index</code>. If any such variables are found, <code>f</code> is called with <code>index</code> as the input.</p><p>Note that <code>index</code> is incremented whenever we go under a binder.</p></dd></dl><dl><dt class="spec type" id="type-list_of_exprs"><a href="#type-list_of_exprs" class="anchor"></a><code><span class="keyword">type</span> <span>'a list_of_exprs</span></code><code> = <span><span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span> list</span></code></dt><dd><p>List of expressions</p></dd></dl><dl><dt class="spec value" id="val-pp_list_of_exprs"><a href="#val-pp_list_of_exprs" class="anchor"></a><code><span class="keyword">val</span> pp_list_of_exprs : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-list_of_exprs">list_of_exprs</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_list_of_exprs"><a href="#val-show_list_of_exprs" class="anchor"></a><code><span class="keyword">val</span> show_list_of_exprs : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-list_of_exprs">list_of_exprs</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt></dl><div><div class="spec include"><div class="doc"></div></div></div><dl><dt class="spec type" id="type-stmt"><a href="#type-stmt" class="anchor"></a><code><span class="keyword">type</span> <span>'a stmt</span></code><code> = <span><span><span class="type-var">'a</span> <a href="index.html#type-raw_stmt">raw_stmt</a></span> <a href="../Common/Location/index.html#type-located">Common.Location.located</a></span></code></dt><dd><p>As with expressions, statements come with a raw statement, <a href="index.html#type-raw_stmt"><code>raw_stmt</code></a> wrapped with a source location.</p></dd></dl><dl><dt class="spec type" id="type-raw_stmt"><a href="#type-raw_stmt" class="anchor"></a><code><span class="keyword">and</span> <span>'a raw_stmt</span></code><code> = </code><table class="variant"><tr id="type-raw_stmt.Def" class="anchored"><td class="def constructor"><a href="#type-raw_stmt.Def" class="anchor"></a><code>| </code><code><span class="constructor">Def</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-raw_stmt.var_name" class="anchored"><td class="def field"><a href="#type-raw_stmt.var_name" class="anchor"></a><code>var_name : string;</code></td></tr><tr id="type-raw_stmt.binding" class="anchored"><td class="def field"><a href="#type-raw_stmt.binding" class="anchor"></a><code>binding : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr><tr id="type-raw_stmt.ascribed_type" class="anchored"><td class="def field"><a href="#type-raw_stmt.ascribed_type" class="anchor"></a><code>ascribed_type : <span><span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span> option</span>;</code></td></tr></table><code>}</code></td><td class="doc"><p>Def statement:</p><ul><li>def <code>var_name</code> := <code>binding</code></li><li>def <code>var_name</code> : <code>ascribed_type</code> := <code>binding</code></li></ul></td></tr><tr id="type-raw_stmt.Axiom" class="anchored"><td class="def constructor"><a href="#type-raw_stmt.Axiom" class="anchor"></a><code>| </code><code><span class="constructor">Axiom</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-raw_stmt.var_name" class="anchored"><td class="def field"><a href="#type-raw_stmt.var_name" class="anchor"></a><code>var_name : string;</code></td></tr><tr id="type-raw_stmt.var_type" class="anchored"><td class="def field"><a href="#type-raw_stmt.var_type" class="anchor"></a><code>var_type : <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span>;</code></td></tr></table><code>}</code></td><td class="doc"><p>Axiom statement:</p><ul><li>axiom <code>var_name</code> : <code>var_type</code></li></ul></td></tr><tr id="type-raw_stmt.Check" class="anchored"><td class="def constructor"><a href="#type-raw_stmt.Check" class="anchor"></a><code>| </code><code><span class="constructor">Check</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></td><td class="doc"><p>Check statement:</p><ul><li>check <a href="index.html#type-expr"><code>expr</code></a></li></ul></td></tr><tr id="type-raw_stmt.Eval" class="anchored"><td class="def constructor"><a href="#type-raw_stmt.Eval" class="anchor"></a><code>| </code><code><span class="constructor">Eval</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="index.html#type-expr">expr</a></span></code></td><td class="doc"><p>Eval statement:</p><ul><li>eval <a href="index.html#type-expr"><code>expr</code></a></li></ul></td></tr></table></dt></dl><dl><dt class="spec value" id="val-pp_stmt"><a href="#val-pp_stmt" class="anchor"></a><code><span class="keyword">val</span> pp_stmt : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-stmt">stmt</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_stmt"><a href="#val-show_stmt" class="anchor"></a><code><span class="keyword">val</span> show_stmt : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-stmt">stmt</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt><dt class="spec value" id="val-pp_raw_stmt"><a href="#val-pp_raw_stmt" class="anchor"></a><code><span class="keyword">val</span> pp_raw_stmt : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-raw_stmt">raw_stmt</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_raw_stmt"><a href="#val-show_raw_stmt" class="anchor"></a><code><span class="keyword">val</span> show_raw_stmt : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-raw_stmt">raw_stmt</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt></dl><div><div class="spec include"><div class="doc"></div></div></div><dl><dt class="spec type" id="type-list_of_stmts"><a href="#type-list_of_stmts" class="anchor"></a><code><span class="keyword">type</span> <span>'a list_of_stmts</span></code><code> = <span><span><span class="type-var">'a</span> <a href="index.html#type-stmt">stmt</a></span> list</span></code></dt><dd><p>List of statements</p></dd></dl><dl><dt class="spec value" id="val-pp_list_of_stmts"><a href="#val-pp_list_of_stmts" class="anchor"></a><code><span class="keyword">val</span> pp_list_of_stmts : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-list_of_stmts">list_of_stmts</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_list_of_stmts"><a href="#val-show_list_of_stmts" class="anchor"></a><code><span class="keyword">val</span> show_list_of_stmts : a. <span>(Ppx_deriving_runtime.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-list_of_stmts">list_of_stmts</a></span> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt></dl><div><div class="spec include"><div class="doc"></div></div></div></div></body></html>