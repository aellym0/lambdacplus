(*
Note that menhir expects the input lexer to be generated by ocamllex, which does
not support unicode.
In order to support unicode, we need to use sedlex, which requires us to write
some boilerplate code.

Boilerplate taken from:
https://github.com/amblafont/sedlex-menhir/blob/master/sedlex-menhir/calc.ml
*)

let () =
  print_endline "Enter input for parsing:";
  let lexbuf = Sedlexing.Utf8.from_channel stdin in
  let lexer  = Sedlexing.with_tokenizer Syntax.Lexer.tokenize lexbuf in
  let parser = MenhirLib.Convert.Simplified.traditional2revised Syntax.Parser.main in
  let result = parser lexer in
  print_endline (Syntax.Ast.show_list_of_stmts result);
  flush stdout
